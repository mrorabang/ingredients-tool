<!DOCTYPE html>
<html>
<head>
    <title>Test MockAPI Delete</title>
</head>
<body>
    <h1>Test MockAPI Delete</h1>
    <div id="result"></div>
    
    <script>
        async function testMockAPIDelete() {
            try {
                // First, get all ingredients
                console.log('Getting ingredients from MockAPI...');
                const response = await fetch('https://68d4a223214be68f8c69d69b.mockapi.io/ingredients');
                const ingredients = await response.json();
                
                console.log('All ingredients:', ingredients);
                document.getElementById('result').innerHTML = `
                    <h2>Found ${ingredients.length} ingredients in MockAPI</h2>
                    <ul>
                        ${ingredients.slice(0, 10).map(ing => `<li>ID: ${ing.id}, Name: "${ing.name}"</li>`).join('')}
                        ${ingredients.length > 10 ? `<li>... and ${ingredients.length - 10} more</li>` : ''}
                    </ul>
                `;
                
                // Find ingredient with "ổi" or "hồng"
                const oiHong = ingredients.find(ing => 
                    ing.name.toLowerCase().includes('ổi') || 
                    ing.name.toLowerCase().includes('hồng') ||
                    ing.name.includes('Ổi') ||
                    ing.name.includes('Hồng')
                );
                
                if (oiHong) {
                    document.getElementById('result').innerHTML += `
                        <h2>Found ổi hồng ingredient:</h2>
                        <p>ID: ${oiHong.id}, Name: "${oiHong.name}"</p>
                        <button onclick="deleteIngredient(${oiHong.id})">Delete This Ingredient</button>
                    `;
                } else {
                    document.getElementById('result').innerHTML += '<h2>No ổi hồng ingredient found</h2>';
                }
                
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('result').innerHTML = `❌ Error: ${error.message}`;
            }
        }
        
        async function deleteIngredient(id) {
            try {
                console.log('Deleting ingredient with ID:', id);
                const response = await fetch(`https://68d4a223214be68f8c69d69b.mockapi.io/ingredients/${id}`, {
                    method: 'DELETE'
                });
                
                if (response.ok) {
                    const result = await response.json();
                    document.getElementById('result').innerHTML += `<p>✅ Successfully deleted ingredient: ${JSON.stringify(result)}</p>`;
                } else {
                    document.getElementById('result').innerHTML += `<p>❌ Failed to delete: ${response.status} ${response.statusText}</p>`;
                }
            } catch (error) {
                console.error('Delete error:', error);
                document.getElementById('result').innerHTML += `<p>❌ Delete error: ${error.message}</p>`;
            }
        }
        
        testMockAPIDelete();
    </script>
</body>
</html>
